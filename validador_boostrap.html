<html lang="es">
    <head>
            <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

            <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
            
            <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
            
    
    
    </head>
    <script>

    let m= "nataliacastell@iesmontsia.org";
    let r="Natalia.123" ;
    let imputCorreu;
    let clic= 0;
    let correu= false;
    let exprexio;
    let boto= true;


    function validar_correu(){
        imputCorreu=document.getElementById("email").value;
        expresio=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(imputCorreu); 
        if (expresio== true){
            correu=true;
            document.getElementById("email").style.borderColor="34840c";
            
            return correu;

        }else{
            correu == false;
            alert("Recorda que el correu ha de conteri '@' i un domini com: /.com /.es");
            document.getElementById("email").style.borderColor="9f0303";
            document.getElementById("email").style.backgroundColor="ffaeae";
            return correu;
        }
    }

    function validador(){
        let paswrd= document.getElementById("pwd").value;
       
        if (imputCorreu==m&paswrd==r){
            document.getElementById("email").style.borderColor="34840c";
            document.getElementById("pwd").style.borderColor="34840c";
            document.getElementById("email").style.backgroundColor="c7f5af";
            document.getElementById("pwd").style.backgroundColor="c7f5af";
            alert("Dades Validades =====> Redirigint");
            window.location.href = "https://moodle.iesmontsia.org/";
            }else if(imputCorreu!==m&paswrd!==r){
                document.getElementById("email").style.borderColor="9f0303";
                document.getElementById("pwd").style.borderColor="9f0303";
                document.getElementById("email").style.backgroundColor="ffaeae";
                document.getElementById("pwd").style.backgroundColor="ffaeae";
                alert("Cap de les dades son correctes! ");
            }else{
                document.getElementById("email").style.borderColor="d97007";
                document.getElementById("pwd").style.borderColor="d97007";
                document.getElementById("email").style.backgroundColor="ffce9d";
                document.getElementById("pwd").style.backgroundColor="ffce9d";
                alert("Algo no va bÃ©, revisa que les dos dades son correctes");
            }
    }
    function activaboto(){
        boto= true
        clic= 0;
    }
    function retrasa5segons () {
        setTimeout(() => {
                validador();
                }, 5000);
        setTimeout(() => {
                activaboto();
                }, 5000);
    }

    function enviar5segons (){
            document.getElementById("email").style.borderColor="black";
            document.getElementById("pwd").style.borderColor="black";
            document.getElementById("email").style.backgroundColor="white";
            document.getElementById("pwd").style.backgroundColor="white";
            if (boto =true& clic==0){
                if (correu= validar_correu()==true){
                    boto= false;
                    retrasa5segons();
                } clic ++;
               
            }else if(boto = false&&clic >= 1){
                setTimeout(() => {
                activaboto();
                }, 5000);
            }else{
                setTimeout(() => {
                activaboto();
                }, 5000);
            }
        }
    



    </script>
    <style long="css">
        body{
            background-color: darkcyan;
            font-family:system-ui ;
        }
        .log{

            min-height: 20%;
            max-height: 20%;
            margin: 10%;
            background-color: azure;
            border-radius: 3%;

        }
        .form{
            margin: 10%;
            margin-bottom: 40%;
        }
        .titulo{
            margin: 20%;
            font-family:system-ui ;
            font-size: 40;

        }

        .loader {
            position: fixed;
            left: 0px;
            top: 0px;
            width: 100%;
            height: 100%;
            z-index: 9999;
            background: url('images/pageLoader.gif') 50% 50% no-repeat rgb(249,249,249);
            opacity: .8;
        }

    </style>
    <body>
        <div class="log">
            <form accion class="form">
                <label class="titulo" id="titulo">Validador usuari:</label>
                <div class="form-group row">
                <label style="display: flexbox;"class="col-sm-2 col-form-label">Email</label>
                <div class="col-sm-10">
                <input style="display: flex;"class="form-control" type="email" id="email" name="email" >
                </div></div>
                <div class="form-group row">
                <label style="display: flex;"class="col-sm-2 col-form-label">Contrasenya</label>
                <div class="col-sm-10">
                <input style="display: flex;"class="form-control" type="password" id="pwd" name="pwd">
                </div></div>
                <button style= "margin-bottom: 10%; "type="button" text="enviar" class="btn btn-primary" id= "submit" onclick="enviar5segons()">Enviar</button>
            </form>
        </div>
    </body>
</html>